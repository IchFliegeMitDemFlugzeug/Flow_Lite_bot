# services/bot/texts/settings.py

"""
Формирование текста экрана «Настройки».

Идея:
- использовать тот же текст, что и для «Личного кабинета»;
- НО всегда показывать реквизиты полностью (show_details = True);
- никакой логики "показать/скрыть реквизиты" здесь нет.
"""

from __future__ import annotations                               # Разрешаем "отложенные" аннотации типов (для type hints)

from ..personal_cabinet import (                                 # Импортируем функцию формирования текста ЛК
    build_personal_cabinet_text,                                # Она уже умеет собирать телефоны и карты из БД
)


async def build_settings_text(
    user_id: int,                                               # ID пользователя в Telegram (ключ JSON-файла в БД)
) -> str:
    """
    Сформировать текст экрана «Настройки» для заданного пользователя.

    Важно:
    - Мы просто переиспользуем build_personal_cabinet_text,
      но принудительно передаём show_details=True,
      чтобы всегда отображать полные номера телефонов и карт
      (без маски "ХХХ 1234").
    """
    # Вызываем функцию формирования текста личного кабинета:
    #  - user_id — ID пользователя (совпадает с именем JSON-файла);
    #  - show_details=True — включаем "режим подробностей".
    return await build_personal_cabinet_text(
        user_id=user_id,                                        # Передаём ID пользователя
        show_details=True,                                      # ВСЕГДА показываем реквизиты полностью
    )
